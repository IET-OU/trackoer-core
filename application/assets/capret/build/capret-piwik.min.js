// Input 0
/*
 jquery.plugin.clipboard.js
 @author Niklas von Hertzen <niklas at hertzen.com>
 @created 14.6.2011 
 @website http://hertzen.com
 @license MIT License
*/
(function($){$.fn.clipboard=function(options){var defaults={prepend:null,append:null,oncopy:function(content){}};var options=$.extend({},defaults,options);$(this).each(function(i,el){el.oncopy=function(e,b){if(window.clipboardData&&document.selection){var s=document.selection;var r=s.createRange();var t=r.htmlText;if(options.prepend!==null)if($.isFunction(options.prepend))t=options.prepend(t)+t;else t=options.prepend+t;if(options.append!==null)if($.isFunction(options.append))t=t+options.append(t);
else t=t+options.append;options.oncopy(t);if(window.clipboardData.setData("Text",t))return false}else{var s=window.getSelection();var r;if(s.rangeCount>=1)r=s.getRangeAt(0);else r=document.createRange();var tmpr;if(s.rangeCount>=1)tmpr=s.getRangeAt(s.rangeCount-1);else tmpr=document.createRange();if(options.append!==null){var append;if($.isFunction(options.append))append=options.append(tmpr.toString());else append=options.append;var a=$("<span />").html(append);var rangeAppend=document.createRange();
rangeAppend.setStart(tmpr.endContainer,tmpr.endOffset);rangeAppend.insertNode(a[0]);rangeAppend.setEnd(a[0],a[0].childNodes.length);window.setTimeout(function(){$(a).remove()},0)}if(options.prepend!==null){var prepend;if($.isFunction(options.prepend))prepend=options.prepend(tmpr.toString());else prepend=options.prepend;var n=$("<span />").html(prepend);r.insertNode(n[0]);var range=document.createRange();range.setStart(n[0],0);range.setEnd(n[0],n[0].childNodes.length);s.addRange(range);window.setTimeout(function(){$(n).remove()},
0)}s.removeAllRanges();s.addRange(r);if(options.append!==null)s.addRange(rangeAppend);options.oncopy(s.toString())}}});return this}})(jQuery);
// Input 1
/*
 oer_license_parser.js: Copyright (C) 2011 by Pat Lockley / License: MIT
 https://github.com/patlockley/openattribute-chrome
*/
var oer_license_parser={attr_names:["license cc:license","about","src","resource","href","instanceof","typeof","rel","rev","property","content","datatype"],license_found:false,license_loaded:false,root_node:document,current_license:{"title":document.title,"url":document.location.href,"author":"","license":"","license_link":"","type":"","attribution_url":""},get_license:function(){var _self=this;if(_self.parse_triples()){var license_html="";var title=_self.current_license["title"];var url=_self.current_license["url"];
var license=_self.current_license["license"];var license_link=_self.current_license["license_link"];var author=_self.current_license["author"];if(author=="")author=_self.current_license["attributionName"];attribution_url=_self.current_license["attribution_url"];non_html_attrib_string="";license_html='<p style="font-weight:bold">'+title+"</p>";attrib_string='<span property="dct:title">'+title+"</span>";non_html_attrib_string=title+" taken from "+url+"\n";license_html+='<p style="font-size:80%"> Source : <a target="blank" href="'+
url+'">'+url+"</a></p>";license_html+='<p style="font-size:80%"> License: <a target="_blank" href="'+license_link+'">'+license+"</a></p>";attrib_string_light=title+" : taken from - "+url;if(author!=""){if(attribution_url!=""){license_html+='<p style="font-size:80%"> Author: <a target="_blank" href="'+attribution_url+'">'+author+"</a></p>";attrib_string+='<a rel="cc:attributionName" '+'href="'+attribution_url+'" target="_blank">'+author+"</a>"}else{license_html+='<p style="font-size:80%" property="cc:attributionName"> Author: '+
author+"</p>";attrib_string+='<span property="cc:attributionUrl">'+attribution_url+'</span><span property="cc:attributionName">'+author+"</span>"}attrib_string_light+="\nAuthor: "+author+" "}attrib_string_light+="\n"+license_link;attrib_string+='<a rel="license" target="_blank" href="'+license_link+'">'+license+"</a>";attrib_string='<div xmlns:dc="http://purl.org/dc/terms/" xmlns:cc"http://creativecommons.org/#ns" about="'+url+'">'+attrib_string+"</div>";var basic_attribution='<p style="font-size:80%">Basic Attribution</p><textarea rows="7" id="attribtext" cols="70">'+
attrib_string_light+"</textarea>";var rdf_attribution='<p style="font-size:80%">RDFa Attribution</p><textarea rows="7" id="attribtextRDFA" cols="70">'+attrib_string+"</textarea>";return{"attribution_string":attrib_string,"non_html_attribution_string":non_html_attrib_string,"basic_attribution":basic_attribution,"rdf_attribution":rdf_attribution,"license_html":license_html}}else return""},parse_triples:function(){var _self=this;var n=_self.root_node;while(n){if(_self.is_parseable_node(n)){rdfa_found=
0;_self.parse_attributes(n)}n=_self.get_next_node(n);if(!n)break}_self.do_triple_hacks();return _self.license_found},get_next_node:function(n){var _self=this;if(n.v){n.v=false;if(n==_self.root_node)return null;if(n.nextSibling)n=n.nextSibling;else n=n.parentNode}else if(n.firstChild){n.v=true;n=n.firstChild}else if(n.nextSibling)n=n.nextSibling;else n=n.parentNode;return n},is_parseable_node:function(n){if(n.nodeName!="LINK"&&typeof n.hasAttributes!="undefined"&&n.hasAttributes()&&n.attributes.length!=
1)return true;else return false},parse_attributes:function(n){var _self=this;for(var i=0;i<_self.attr_names.length;i++)if(!_self.parse_attribute(n,_self.attr_names[i]))break},parse_attribute:function(n,attr_name){var _self=this;if(n.getAttribute(attr_name)==null)return true;if(n.getAttribute(attr_name)=="nofollow")return true;asset="";attribute="";value="";if(n.getAttribute(attr_name).indexOf(":")==2)attribute=n.getAttribute(attr_name).substring(3);if(attr_name=="property")value=n.innerHTML;if(n.getAttribute(attr_name)==
"dc:type")return false;if(attr_name=="rel"&&n.getAttribute(attr_name).indexOf("license")!=-1){value=n.getAttribute("href");attribute="license"}if(attr_name=="href"&&n.getAttribute(attr_name).indexOf("http://")!=-1)value=n.getAttribute("href");if(asset==""){asset=document.location.href;if(attribute=="")if(n.getAttribute("property")=="cc:attributionName"&&n.getAttribute("rel")=="cc:attributionURL"){attribute=n.getAttribute(attr_name);triple_array=Array(asset,"cc:attributionName",n.innerHTML);_self.extract_details(triple_array);
attribute="attributionURL"}else attribute=n.getAttribute(attr_name)}if(attribute=="type")value=n.getAttribute("href");if(attribute=="attributionURL")value=n.getAttribute("href");if(attribute=="attributionName")value=n.innerHTML;if(value!=attribute)if(asset!=null&&attribute!=null&&value!=null)if(asset.length!=0&&attribute.length!=0&&value.length!=0){base=document.location.href.split("/")[2];if(value.indexOf("http://")==0){if(base!=value.split("/")[2]){triple_array=Array(asset,attribute,value);_self.extract_details(triple_array);
triple_array=Array()}}else{triple_array=Array(asset,attribute,value);_self.extract_details(triple_array);triple_array=Array()}}return true},extract_details:function(data_triple){var _self=this;switch(data_triple[1]){case "title":case "dct:title":_self.current_license["title"]=data_triple[2];break;case "license":_self.license_found=true;_self.current_license["license"]=data_triple[2];break;case "attributionName":case "cc:attributionName":_self.current_license["attributionName"]=data_triple[2];break;
case "attributionURL":_self.current_license["attributionURL"]=data_triple[2];break;case "author":_self.current_license["author"]=data_triple[2];break}},do_triple_hacks:function(){var _self=this;switch(window.location.toString().split(".")[1]){case "flickr":var loggedin=document.body.innerHTML.split('data-ywa-name="Account name">');logged_in_user=loggedin[1].split("</a>")[0];var photo_by=document.body.innerHTML.split('<strong class="username">By <a href="/photos/');photo_by_user=photo_by[1].split(">")[1];
photo_by_author=photo_by_user.split("<");if(logged_in_user==photo_by_author[0]){triple_array=Array(window.location.toString(),"author",logged_in_user);extract_details(triple_array);triple_array=Array()}break;default:break}}};
// Input 2
var JSON;if(!JSON)JSON={};
(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=
gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function")value=value.toJSON(key);if(typeof rep==="function")value=rep.call(holder,key,value);switch(typeof value){case "string":return quote(value);case "number":return isFinite(value)?String(value):"null";case "boolean":case "null":return String(value);case "object":if(!value)return"null";gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=
1)partial[i]=str(i,value)||"null";v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1)if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}}else for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v)partial.push(quote(k)+(gap?": ":":")+v)}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+
gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function")JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number")for(i=0;i<space;i+=1)indent+=" ";else if(typeof space==="string")indent=space;rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number"))throw new Error("JSON.stringify");return str("",{"":value})};if(typeof JSON.parse!=="function")JSON.parse=
function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object")for(k in value)if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined)value[k]=v;else delete value[k]}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text))text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse");}})();
// Input 3
/*
 capret-piwik.js: Based on capret.js
 Copyright 2012 The Open University/ License MIT/ Author N.D.Freear 2012-08-21.
 http://track.olnet.org
*/
(function(jQuery){jQuery=jQuery.noConflict();function get_data(key,mydefault){var val=jQuery("script[src*=capret-piwik]").attr("data-piwik_"+key);val=typeof val==="undefined"?mydefault:val;return"0"===val?false:val}var piwik_url=get_data("url","http://track.olnet.org/piwik"),idsite=get_data("idsite",1),source_ref=get_data("src_ref",true),IE_hack=get_data("ie_hack",false),IE_comment=get_data("ie_comment",true),record=get_data("rec",1),debug=get_data("debug",false),UA=jQuery.browser,M=Math,enc=encodeURIComponent,
J=JSON,Doc=document,DL=Doc.location,LP=oer_license_parser,log=function(s){if(typeof console==="object"&&debug)console.log(arguments.length<=1?s:arguments)};log("capret-piwik");function truncate(str,length){if(str.length>length){str=str.substring(0,length);str=str.replace(/w+$/,"");str+="..."}return str}function final_params_pi(copy_text,env){var tx=truncate(copy_text,100),cv="_cvar";env.idsite=idsite;env.rec=record;env.rand=M.floor(M.random()*100);env.action_name=enc(Doc.title)+"/"+enc(" "+tx)+"/"+
enc(" CaPReT");env[cv]={1:["source",DL.href],2:["length",copy_text.length],3:["text",tx],4:["modified",Doc.lastModified],5:["copyTime",(new Date).toUTCString()]};env[cv]=enc(J.stringify(env[cv]));return jQuery.param(env)}function image_tag_piwik(copy_text,env){var img='<img src="'+piwik_url+"/piwik.php?"+final_params_pi(copy_text,env)+'" alt=""/>';log(img);log(env);return img}jQuery(function(){var env={},Win=jQuery(window),urlkey=source_ref?"urlref":"url",license=LP.get_license(),comment=IE_comment&&
UA.msie?"<\!--\n * Content copied using Internet Explorer.\n"+" * To paste rich-text cleanly use a different browser or paste into an HTML source editor on your site.\n"+" * For more help visit, http://track.olnet.org/help/capret/ie\n--\>":"";comment=typeof IE_comment==="string"&&IE_comment.length>1&&UA.msie?"<\!--\n"+IE_comment+"\n--\>":comment;env[urlkey]=enc(DL.href);env.res=enc(Win.width()+"x"+Win.height());jQuery("body").clipboard({append:function(e){if(IE_hack&&UA.msie){jQuery("body").append(image_tag_piwik(e,
env));return license.license_html}return comment+image_tag_piwik(e,env)+license.license_html}})})})(jQuery);